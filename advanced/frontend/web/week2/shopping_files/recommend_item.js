var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};define(["require","exports","jquery","./base","../../common/options/option_base","../services/search_collection","../services/util"],function(t,e,i,r,n,a,s){"use strict";var p=function(t){function e(e){var i=t.call(this,e)||this;return i.spec=!1,i.addData=[],e&&i.assign(e),i}return __extends(e,t),e.prototype.filter=function(t){},e.prototype.getId=function(){return this.id},e}(r);return function(t){function e(t,e){if(!t.length)return null;var r={};return i.each(t,function(t,i){var n=new e(i);r[n.getId()]?n.filter(r):r[n.getId()]=n}),i.each(r,function(t,e){a.searchCollection(e.getId(),e)}),r}function r(t,e){if(!t.length)return null;var r={};return i.each(t,function(t,i){var n=new e(i);null!=n.src&&null!=n.itemName&&(r[t]=n)}),i.each(r,function(t,e){a.searchCollection(e.getId(),e)}),r}t.factory=e,t.factoryT=r;var p=function(){function t(t,e,i,r,n){this.smSeq=t,this.kind=e,this.qty=i,this.parentSeq=r,this.type=n}return t.prototype.toData=function(){return{sku_id:this.smSeq,kind:this.kind,qty:this.qty,parent_seq:this.parentSeq,type:this.type}},t}();t.AddData=p;var c=function(e){function i(i){var r=e.call(this,i)||this;return r.type=r.type>>0||0,r.href=s.mkItemUrl(r.id),r.title=r.title||r.itemName,r.origin=parseFloat(String(r.origin).replace(/,/g,""))||0,r.price=parseFloat(String(r.price).replace(/,/g,""))||0,r.src=r.src.replace("120x120","80x80"),r.spec=1==r.isPop?!0:!1,r.addData.push(new t.AddData(r.id,n.ITEM_KIND.KIND_MAIN,1,"",r.type).toData()),r}return __extends(i,e),i.prototype.getMetadata=function(){return t.RecommendFee.METADATA},i}(t);c.METADATA={id:"sm_seq",price:"sm_price",origin:"it_mprice",itemName:"sm_name",title:"title",src:"sm_pic",type:"type",isPop:"is_pop"},t.RecommendFee=c;var o=function(e){function i(i){var r=e.call(this,i)||this;return r.type=Number(r.isMall)?1:0,r.href=s.mkItemUrl(r.id),r.price=parseFloat(String(r.price).replace(/,/g,""))||0,r.src=r.src.replace("120x120","200x200"),r.spec=1==r.isMainItemMutiSpec||1==r.isPop?!0:!1,r.addData.push(new t.AddData(r.id,n.ITEM_KIND.KIND_MAIN,1,"",r.type).toData()),r}return __extends(i,e),i.prototype.getMetadata=function(){return t.GuessYouLike.METADATA},i}(t);o.METADATA={id:"sm_seq",price:"sm_price",origin:"it_mprice",itemName:"sm_name",title:"sm_name",src:"sm_pic",isMall:"is_mall",isMainItemMutiSpec:"isMutiSpec",isPop:"is_pop"},t.GuessYouLike=o;var d=function(e){function i(i){var r=e.call(this,i)||this;return r.price=parseFloat(String(r.price).replace(/,/g,""))||0,r.origin=Math.max(r.origin,r.standardPrice),r.spec=1==r.isMainItemMutiSpec||1==r.skuType?!0:!1,r.kind=2==r.skuType?n.ITEM_KIND.KIND_MULTIPLE:n.ITEM_KIND.KIND_MAIN,r.addData.push(new t.AddData(r.id,r.kind,1,"",r.type).toData()),r}return __extends(i,e),i.prototype.getMetadata=function(){return t.Footprint.METADATA},i}(t);d.METADATA={id:"sell_no",price:"price",href:"source_url",origin:"market_price",standardPrice:"standardPrice",itemName:"name",title:"name",src:"it_pic",type:"type",isMall:"is_mall",isMainItemMutiSpec:"isMutiSpec",skuType:"skuType"},t.Footprint=d;var u=function(e){function i(i){var r=e.call(this,i)||this;return r.isSpecialOffer=!0,r.type=r.type>>0||0,r.origin=parseFloat(String(r.origin).replace(/,/g,""))||0,r.price=parseFloat(String(r.price).replace(/,/g,""))||0,r.id=r.id||r.parentSeq,n.ITEM_KIND.KIND_MAIN==r.kind&&r.addData.push(new t.AddData(r.getId(),r.kind,1,r.parentSeq,0).toData()),r}return __extends(i,e),i.prototype.getMetadata=function(){return t.SpecialOffer.METADATA},i.prototype.getId=function(){return n.ITEM_KIND.KIND_MAIN==this.kind?this.id:this.parentSeq},i.prototype.filter=function(e){var i=this.getId(),r=e[i];this.kind==n.ITEM_KIND.KIND_MAIN?(n.ITEM_KIND.KIND_ADD!=r.kind&&this.addData.push(new t.AddData(this.id,r.kind,1,r.parentSeq,0).toData()),this.addData=this.addData.concat(r.addData),e[i]=this):n.ITEM_KIND.KIND_ADD!=this.kind&&r.addData.push(new t.AddData(this.id,this.kind,1,this.parentSeq,0).toData())},i}(t);u.METADATA={id:"sm_seq",parentSeq:"parent_seq",href:"source_url",price:"price",origin:"mkt_price",itemName:"item_name",title:"name",src:"it_pic",type:"type",kind:"kind"},t.SpecialOffer=u}(p||(p={})),p});
//# sourceMappingURL=recommend_item.js.map