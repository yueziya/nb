(function(){var d=document;var n=new function(){this._rnd=function(){return Math.round(Math.random()*10000)};this._trc=location.protocol+"//tca.sagetrc.com/trc/";this._trc_rf=this._trc+"RF/"+this._rnd()+".js?";this._send=function(g){var h=d.getElementsByTagName("head")[0],j=d.createElement("script");j.async=true;j.src=g;j.type="text/javascript";h.appendChild(j)};var b=window.location.href;var c=b.match(/adtiid=([^&#]*)/);var f=c?c[1]:"";this._send(this._trc_rf+"id="+(pubsage_conv_id?encodeURIComponent(pubsage_conv_id):"")+"&r="+encodeURIComponent(d.referrer)+"&iid="+encodeURIComponent(f)+"&ua="+encodeURIComponent(navigator.userAgent))};var a=n,l={},i={},e=function(b){return encodeURIComponent(b)};a._trc_cv=a._trc+"CV/",a._trc_cl=a._trc+"CL/",a._trc_ui=a._trc+"UI/",_randomOid=(new Date().getTime()+Math.round(Math.random()*10000)).toString(16),_get_param=function(c,b){return"id="+(pubsage_conv_id?e(pubsage_conv_id):"")+"&o="+(b?b:"")+"&pid="+((l.orderid&&l.orderid[b]&&l.orderid[b][c]["pid"])?l.orderid[b][c]["pid"]:"")+"&pn="+((l.orderid&&l.orderid[b]&&l.orderid[b][c]["pdn"])?l.orderid[b][c]["pdn"]:"")+"&c="+((l.orderid&&l.orderid[b]&&l.orderid[b][c]["pdc"])?l.orderid[b][c]["pdc"]:"")},_sendEv=true;a.setUserInfo=function(b,c){l.uid=e(b);l.email=e(c);return this};a.addProductInfo=function(h,b,g,f){try{if(!h){h=_randomOid}if(!("orderid" in l)){l.orderid={}}(h in l.orderid)||(l.orderid[h]=[]);l.orderid[h]&&l.orderid[h].push({pid:e(b),pdn:e(g),pdc:e(f)})}catch(c){}return this};a.sendTracking=function(){var c=l;c.uid&&c.email&&a._send(a._trc_ui+this._rnd()+".js?id="+e(pubsage_conv_id)+"&u="+c.uid+"&e="+c.email,"UI");for(var b in c.orderid){if(!i[b+c.uid+c.email]){for(var f=0;f<c.orderid[b].length;f++){a._send(a._trc_cv+this._rnd()+".js?"+_get_param(f,b),"CV")}i[b+c.uid+c.email]=1}}};a.sendClickEvent=function(c,f){var b=e(f);if(!i[f]){i[f]={ev_id:f,_sendEv:true};if(c==true||(c==false&&i[f]._sendEv)){a._send(a._trc_cl+this._rnd()+".js?id="+e(pubsage_conv_id)+"&eid="+b,"CL");c==false&&(i[f]._sendEv=false)}}else{if(i[f]&&i[f]._sendEv){a._send(a._trc_cl+this._rnd()+".js?id="+e(pubsage_conv_id)+"&eid="+b,"CL");c==false&&(i[f]._sendEv=false)}}return this};a.setMessage=function(h){var j=[];if(typeof h=="string"){for(var f=0,b=arguments.length;f<b;f++){j.push(arguments[f])}}else{var g=[];for(var c in h){g.push(c)}g.sort();for(var f=0,b=g.length;f<b;f++){j.push(e(g[f]+"="+h[g[f]]))}}a._send("http://trc.adsage.com/trc/atac/conv_msg.js?id="+e(pubsage_conv_id)+"&msg="+j.join("{,,}"))};a.push=function(){try{for(var b=arguments,c=0,f=0;f<b.length;f++){var u=b[f],j=u.shift(),t=[];for(var k=0,h=u.length;k<h;k++){t.push(u[k])}a[j].apply(a,t)}}catch(g){}return this};a.setUI=function(c,b){a.push(["setUserInfo",uid,b]);a.push(["sendTracking"])};a.click=function(b){a.push(["sendClickEvent",false,b]);a.push(["sendTracking"])};a.setOrderInfo=function(g){for(var c=0,b=g.length;c<b;c++){var f=g[c];a.push(["addProductInfo",f[0],f[1],f[2],f[3]])}a.push(["sendTracking"])};var m=a;(function(){var c=window.pubsage_conv,b=!1;if(c&&typeof c.push=="function"&&(b=Object.prototype.toString.call(Object(c))=="[object Array]",!b)){m=c;return}window.pubsage_conv=m;b&&m.push.apply(m,c)})();(function(){var j=/\?\S*adsageTest=(\S+)&adsageType=(\S+)&adsageTk=(\S+)/;var k=window.location.search,h="pv",g="";var b=k.match(j);if(b){h=b[2],g=b[3];var c=new Image(1,1),f="http://data.adsage.com/CodeCheck/CheckResult?adid="+pubsage_conv_id+"&token="+g;if(h=="CL"){f+="&hasMethod="+(typeof window.Ps_Click=="undefined"?0:1)}else{if(h=="CV"){f+="&hasMethod="+(typeof window.getOrderInfo=="undefined"?0:1)}else{if(h=="UI"){f+="&hasMethod="+(typeof window.f=="undefined"?0:1)}}}c.src=f}})()})();